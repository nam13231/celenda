<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lá»‹ch LÃ m Viá»‡c</title>

<!-- PWA Meta -->
<meta name="theme-color" content="#4CAF50">
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icons/icon-192.png" type="image/png">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Lá»‹ch LÃ m Viá»‡c">

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f5f5f5;
    }
    h1 {
        text-align: center;
        margin: 10px 0;
    }
    .month {
        margin: 20px;
        padding: 10px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .month h2 {
        text-align: center;
        margin-bottom: 10px;
    }
    .calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 5px;
    }
    .day {
        padding: 10px;
        background: #e0e0e0;
        text-align: center;
        border-radius: 4px;
        cursor: pointer;
    }
    .day.has-task {
        background: #90caf9;
    }
</style>
</head>
<body>

<h1>ðŸ“… Lá»‹ch LÃ m Viá»‡c</h1>
<div id="calendar-container"></div>

<script>
function daysInMonth(month, year) {
    return new Date(year, month, 0).getDate();
}

function renderCalendar() {
    const container = document.getElementById('calendar-container');
    const year = new Date().getFullYear();

    for (let m = 1; m <= 12; m++) {
        const monthDiv = document.createElement('div');
        monthDiv.className = 'month';
        monthDiv.innerHTML = `<h2>ThÃ¡ng ${m}</h2>`;

        const calGrid = document.createElement('div');
        calGrid.className = 'calendar';

        const days = daysInMonth(m, year);
        for (let d = 1; d <= days; d++) {
            const dayDiv = document.createElement('div');
            dayDiv.className = 'day';
            dayDiv.textContent = d;

            const key = `${year}-${m}-${d}`;
            if (localStorage.getItem(key)) {
                dayDiv.classList.add('has-task');
            }

            dayDiv.onclick = () => {
                const task = prompt(`Nháº­p cÃ´ng viá»‡c cho ngÃ y ${d}/${m}/${year}:`,
                                    localStorage.getItem(key) || '');
                if (task) {
                    localStorage.setItem(key, task);
                    dayDiv.classList.add('has-task');
                } else {
                    localStorage.removeItem(key);
                    dayDiv.classList.remove('has-task');
                }
            };

            calGrid.appendChild(dayDiv);
        }

        monthDiv.appendChild(calGrid);
        container.appendChild(monthDiv);
    }
}

renderCalendar();

// ÄÄƒng kÃ½ Service Worker
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
            .then(reg => console.log('SW registered:', reg))
            .catch(err => console.log('SW registration failed:', err));
    });
}
</script>

</body>
</html>
